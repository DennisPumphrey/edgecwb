<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Wed Jul 15 14:50:09 MDT 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>IndexFileReplicator</title>
<meta name="date" content="2015-07-15">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="IndexFileReplicator";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IndexFileReplicator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/usgs/anss/edge/IndexFile.CloseThread.html" title="class in gov.usgs.anss.edge"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.CloseThread.html" title="class in gov.usgs.anss.edge"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/usgs/anss/edge/IndexFileReplicator.html" target="_top">Frames</a></li>
<li><a href="IndexFileReplicator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">gov.usgs.anss.edge</div>
<h2 title="Class IndexFileReplicator" class="title">Class IndexFileReplicator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>gov.usgs.anss.edge.IndexFileReplicator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Comparable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">IndexFileReplicator</span>
extends java.lang.Object
implements java.lang.Comparable</pre>
<div class="block">This class is responsible for all file writes for a replicated file.  This includes
 the .ms (data replication), .idx(index replication), and .chk(index check file).
 It has static functions which can be used to access and manipulate the list of all
 objects of this type (files is a list of all open IndexFileReplicators).  

 The object portions are used to open a set of files for replication, managing the
 list of check blocks, writing data to the index and  data replications (writeIndexBlock()
 and writeDataBlock()).  The class tracks last time the file was used so that stale or
 inactive files can be detected (see closeOld()). 

 When a new one is created the algorithm for deciding where to put the file is different
 than for an "Edge" computer.  This is the algorithm (only step 1 for readonly files) :
<p> 1)  The paths are scanned for the file and if it is found it is opened.
<p> 2)  The paths are scanned for a file labeled empty_node.ms where node is the edge node
that needs to be opened.  If such a file is found it is renamed to the usual julian_node.ms
and opened.
<p> 3) The Paths are check for how much free space is available on each one.  The path with
the largest amount of free space has the file opened on it.
<p>

 The data file is Zeroed by a Thread started when a new IFR is created for writing. This
 Thread attempts to keep 2000 block ahead of the "high water" block written to the file.
 Because a new block might come in way above the zero's progress, the writeDataBlock() 
 method will queue the data block to be written by the Zeroer after the zeroer has passed
 the block.  In this way all writeDataBlock() calls return immediately.

 The "check" blocks are images of the corresponding index blocks but its bit map is used
 to indicate that the block has been confirmed as written into the data file.  Differences
 in the bit maps between the index and check files indicate blocks which might not have
 been received and written in the data file.  Each data block writen sets the corresponding
 bit map for the index block, extent index and bit within the extent.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.CloseThread.html" title="class in gov.usgs.anss.edge">IndexFileReplicator.CloseThread</a></strong></code>
<div class="block">closing can take quite some time, so put it in a thread to prevent slow downs</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#IndexFileReplicator(int,%20java.lang.String,%20int,%20boolean,%20boolean)">IndexFileReplicator</a></strong>(int&nbsp;jul,
                   java.lang.String&nbsp;node,
                   int&nbsp;hiwater,
                   boolean&nbsp;init,
                   boolean&nbsp;ro)</code>
<div class="block">Creates a new instance of IndexFile managed as a continuous wave form buffer (
 (that is it has a number of roots managed for space but not for fixed days)</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#IndexFileReplicator(java.lang.String,%20java.lang.String,%20int,%20boolean,%20boolean)">IndexFileReplicator</a></strong>(java.lang.String&nbsp;file,
                   java.lang.String&nbsp;node,
                   int&nbsp;hiwater,
                   boolean&nbsp;init,
                   boolean&nbsp;ro)</code>
<div class="block">Creates a new instance of IndexFile if the file name is known on an continuous
 waveform type computer (that is disk roots managed for space and not # of days).</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#close()">close</a></strong>()</code>
<div class="block">close this index file and clean up other resources.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#closeAll()">closeAll</a></strong>()</code>
<div class="block">close open for write file using the list of open files</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#closeJulianLimit(int,%20int)">closeJulianLimit</a></strong>(int&nbsp;limit,
                int&nbsp;msused)</code>
<div class="block">close any files which are not within the limit number of days and not used in some amount of time</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#closeStale(int)">closeStale</a></strong>(int&nbsp;ms)</code>
<div class="block">close any files which have not been used for the given number of millis</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#compareTo(java.lang.Object)">compareTo</a></strong>(java.lang.Object&nbsp;other)</code>
<div class="block">compares two file types orders them by julian day.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#deleteJulianLimit(int)">deleteJulianLimit</a></strong>(int&nbsp;limit)</code>
<div class="block">check to see if a file exists on the paths for data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#fileExists(java.lang.String)">fileExists</a></strong>(java.lang.String&nbsp;name)</code>
<div class="block">check to see if a file exists on the paths for data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#forceinit()">forceinit</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../gov/usgs/anss/edge/RawDisk.html" title="class in gov.usgs.anss.edge">RawDisk</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getCheckRawDisk()">getCheckRawDisk</a></strong>()</code>
<div class="block">get raw disk object for index check file</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../gov/usgs/anss/edge/RawDisk.html" title="class in gov.usgs.anss.edge">RawDisk</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getDataRawDisk()">getDataRawDisk</a></strong>()</code>
<div class="block">get raw disk object for data file</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getFilename()">getFilename</a></strong>()</code>
<div class="block">return the filename associated with this IndexFile</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getFullStatus()">getFullStatus</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.StringBuilder</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getFullStatusSB()">getFullStatusSB</a></strong>()</code>
<div class="block">dump out info on all known open files</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getHash(java.lang.StringBuilder,%20int)">getHash</a></strong>(java.lang.StringBuilder&nbsp;node,
       int&nbsp;julian)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getHash(java.lang.String,%20int)">getHash</a></strong>(java.lang.String&nbsp;node,
       int&nbsp;julian)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../gov/usgs/anss/edge/IndexBlockCheck.html" title="class in gov.usgs.anss.edge">IndexBlockCheck</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getIndexBlockCheck(int)">getIndexBlockCheck</a></strong>(int&nbsp;blk)</code>
<div class="block">return a check block if there is one for the given block</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getIndexchecker()">getIndexchecker</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html" title="class in gov.usgs.anss.edge">IndexFileReplicator</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getIndexFileReplicator(int,%20java.lang.String)">getIndexFileReplicator</a></strong>(int&nbsp;julian,
                      java.lang.String&nbsp;node)</code>
<div class="block">get IndexFile associated with a given day, This routine enforces the 
 open days rules and returns a pointer to "future.idx" or "past.idx" if the
 day is out of range</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html" title="class in gov.usgs.anss.edge">IndexFileReplicator</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getIndexFileReplicator(int,%20java.lang.StringBuilder)">getIndexFileReplicator</a></strong>(int&nbsp;julian,
                      java.lang.StringBuilder&nbsp;node)</code>
<div class="block">get IndexFile associated with a given day, This routine enforces the 
 open days rules and returns a pointer to "future.idx" or "past.idx" if the
 day is out of range</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getInstance()">getInstance</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getJulian()">getJulian</a></strong>()</code>
<div class="block">return the full julian day for this file</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getLastUsed()">getLastUsed</a></strong>()</code>
<div class="block">return time this file was last used to read or write anything</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../gov/usgs/anss/edge/MasterBlock.html" title="class in gov.usgs.anss.edge">MasterBlock</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getMasterBlocks()">getMasterBlocks</a></strong>()</code>
<div class="block">Cause the master blocks to be re-read.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getMaxIndex()">getMaxIndex</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getMonitorString()">getMonitorString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getNode()">getNode</a></strong>()</code>
<div class="block">return the edge node string for this file</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getNOpenFiles()">getNOpenFiles</a></strong>()</code>
<div class="block">get number of open files</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getNPaths()">getNPaths</a></strong>()</code>
<div class="block">return number of paths</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getPath(int)">getPath</a></strong>(int&nbsp;i)</code>
<div class="block">return the requested path</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getPathString()">getPathString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../gov/usgs/anss/edge/RawDisk.html" title="class in gov.usgs.anss.edge">RawDisk</a></code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getRawDisk()">getRawDisk</a></strong>()</code>
<div class="block">get the rawdisk variable for using the index file</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getStateLock()">getStateLock</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.StringBuilder</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getStatusAll()">getStatusAll</a></strong>()</code>
<div class="block">For every open IndexFileReplicator, process up any stale or completed blocks!</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getStatusString()">getStatusString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#getTick()">getTick</a></strong>()</code>
<div class="block">return the ticks counter in the zeroer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#init()">init</a></strong>()</code>
<div class="block">This does all of the one-time static set up, create tree, read properties.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#isClosing()">isClosing</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#isReadOnly()">isReadOnly</a></strong>()</code>
<div class="block">is this file readonly</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#isShuttingDown()">isShuttingDown</a></strong>()</code>
<div class="block">return state of shutting down variable</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#registerIndexChecker(java.lang.Object)">registerIndexChecker</a></strong>(java.lang.Object&nbsp;chk)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#setDebug(boolean)">setDebug</a></strong>(boolean&nbsp;t)</code>
<div class="block">set debug level</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#setDefaultLength(int)">setDefaultLength</a></strong>(int&nbsp;l)</code>
<div class="block">set the default length of the da ta files in blocks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#setFL(java.lang.String)">setFL</a></strong>(java.lang.String&nbsp;s)</code>
<div class="block">set who has the file list mutex</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#setMaxIndex(int)">setMaxIndex</a></strong>(int&nbsp;i)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#toString()">toString</a></strong>()</code>
<div class="block">a string representing this index file</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.StringBuilder</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#toStringBuilder(java.lang.StringBuilder)">toStringBuilder</a></strong>(java.lang.StringBuilder&nbsp;tmp)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.StringBuilder</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#toStringBuilderFull(java.lang.StringBuilder)">toStringBuilderFull</a></strong>(java.lang.StringBuilder&nbsp;tmp)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#toStringFull()">toStringFull</a></strong>()</code>
<div class="block">a string representing this index file</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#trimFiles(int)">trimFiles</a></strong>(int&nbsp;target)</code>
<div class="block">close any files until less that the target number of files are opened.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#trimFileSize()">trimFileSize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#updateLastUsed()">updateLastUsed</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#waitForClose()">waitForClose</a></strong>()</code>
<div class="block">this will wait for a closing file to be closed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#writeDataBlock(java.lang.StringBuilder,%20byte[],%20int,%20int,%20int,%20boolean)">writeDataBlock</a></strong>(java.lang.StringBuilder&nbsp;seedname,
              byte[]&nbsp;buf,
              int&nbsp;iblk,
              int&nbsp;indexBlock,
              int&nbsp;index,
              boolean&nbsp;continuation)</code>
<div class="block">write out a new data block, if this is new highwater in the file, it sets it so
 and makes sure the zeroer has zeroed past this block before it is written.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#writeDataBlock(java.lang.String,%20byte[],%20int,%20int,%20int,%20boolean)">writeDataBlock</a></strong>(java.lang.String&nbsp;seedname,
              byte[]&nbsp;buf,
              int&nbsp;iblk,
              int&nbsp;indexBlock,
              int&nbsp;index,
              boolean&nbsp;continuation)</code>
<div class="block">write out a new data block, if this is new highwater in the file, it sets it so
 and makes sure the zeroer has zeroed past this block before it is written.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#writeIndexBlock(byte[],%20int,%20int,%20java.lang.String)">writeIndexBlock</a></strong>(byte[]&nbsp;buf,
               int&nbsp;indexBlock,
               int&nbsp;extentIndex,
               java.lang.String&nbsp;seedname)</code>
<div class="block">write index block, if this index is the ctl block, the next_extent is checked to
 insure out version is just as high and that the zero is past it and the ctl block is 
 updated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#writeIndexBlock(byte[],%20int,%20int,%20java.lang.StringBuilder)">writeIndexBlock</a></strong>(byte[]&nbsp;buf,
               int&nbsp;indexBlock,
               int&nbsp;extentIndex,
               java.lang.StringBuilder&nbsp;seedname)</code>
<div class="block">write index block, if this index is the ctl block, the next_extent is checked to
 insure out version is just as high and that the zero is past it and the ctl block is 
 updated.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html#writeStale()">writeStale</a></strong>()</code>
<div class="block">For every open IndexFileReplicator, process up any stale or completed blocks!</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="IndexFileReplicator(int, java.lang.String, int, boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>IndexFileReplicator</h4>
<pre>public&nbsp;IndexFileReplicator(int&nbsp;jul,
                   java.lang.String&nbsp;node,
                   int&nbsp;hiwater,
                   boolean&nbsp;init,
                   boolean&nbsp;ro)
                    throws java.io.FileNotFoundException,
                           <a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a>,
                           java.io.IOException,
                           <a href="../../../../gov/usgs/anss/edge/EdgeFileDuplicateCreationException.html" title="class in gov.usgs.anss.edge">EdgeFileDuplicateCreationException</a></pre>
<div class="block">Creates a new instance of IndexFile managed as a continuous wave form buffer (
 (that is it has a number of roots managed for space but not for fixed days)</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>jul</code> - The julian date of the desired file</dd><dd><code>node</code> - The node number of the desired file</dd><dd><code>hiwater</code> - The lowest block number if file its o.k. to zero!</dd><dd><code>init</code> - if true this is a new file</dd><dd><code>ro</code> - If true, this Index file can only read (disables all allocation functions)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.FileNotFoundException</code> - if init is false and file is not found!</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a></code> - If init is true and file is readonly, non-sense!</dd>
<dd><code>java.io.IOException</code> - Generally related to reads and writes failing</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileDuplicateCreationException.html" title="class in gov.usgs.anss.edge">EdgeFileDuplicateCreationException</a></code> - if this file has already been opened!</dd></dl>
</li>
</ul>
<a name="IndexFileReplicator(java.lang.String, java.lang.String, int, boolean, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>IndexFileReplicator</h4>
<pre>public&nbsp;IndexFileReplicator(java.lang.String&nbsp;file,
                   java.lang.String&nbsp;node,
                   int&nbsp;hiwater,
                   boolean&nbsp;init,
                   boolean&nbsp;ro)
                    throws java.io.FileNotFoundException,
                           <a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a>,
                           java.io.IOException,
                           <a href="../../../../gov/usgs/anss/edge/EdgeFileDuplicateCreationException.html" title="class in gov.usgs.anss.edge">EdgeFileDuplicateCreationException</a></pre>
<div class="block">Creates a new instance of IndexFile if the file name is known on an continuous
 waveform type computer (that is disk roots managed for space and not # of days).
The filename will be parsed to create a julian and any extension will be stripped off
before calling openIndexFileNonEdge().  Fixed number of days per path root.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>file</code> - A absolute path to the index file to open</dd><dd><code>node</code> - The node number of the file (this should also be in the file name!)</dd><dd><code>hiwater</code> - The lowest block number if file its o.k. to zero!</dd><dd><code>init</code> - if true this is a new file</dd><dd><code>ro</code> - If true, this Index file can only read (disables all allocation functions)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.FileNotFoundException</code> - if init is false and file is not found!</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileReadOnlyException.html" title="class in gov.usgs.anss.edge">EdgeFileReadOnlyException</a></code> - If init is true and file is readonly, non-sense!</dd>
<dd><code>java.io.IOException</code> - Generally related to reads and writes failing</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/EdgeFileDuplicateCreationException.html" title="class in gov.usgs.anss.edge">EdgeFileDuplicateCreationException</a></code> - if such is detected (should now be impossible!)</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getStateLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStateLock</h4>
<pre>public static&nbsp;int&nbsp;getStateLock()</pre>
</li>
</ul>
<a name="isClosing()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isClosing</h4>
<pre>public&nbsp;boolean&nbsp;isClosing()</pre>
</li>
</ul>
<a name="getHash(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHash</h4>
<pre>public static&nbsp;long&nbsp;getHash(java.lang.String&nbsp;node,
           int&nbsp;julian)</pre>
</li>
</ul>
<a name="getHash(java.lang.StringBuilder, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHash</h4>
<pre>public static&nbsp;long&nbsp;getHash(java.lang.StringBuilder&nbsp;node,
           int&nbsp;julian)</pre>
</li>
</ul>
<a name="waitForClose()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForClose</h4>
<pre>public&nbsp;boolean&nbsp;waitForClose()</pre>
<div class="block">this will wait for a closing file to be closed.  If it does not happen in 10 seconds the return will be false.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>True if file is not closed and off the list of files.</dd></dl>
</li>
</ul>
<a name="setMaxIndex(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxIndex</h4>
<pre>public&nbsp;void&nbsp;setMaxIndex(int&nbsp;i)</pre>
</li>
</ul>
<a name="registerIndexChecker(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerIndexChecker</h4>
<pre>public&nbsp;void&nbsp;registerIndexChecker(java.lang.Object&nbsp;chk)</pre>
</li>
</ul>
<a name="getIndexchecker()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexchecker</h4>
<pre>public&nbsp;java.lang.Object&nbsp;getIndexchecker()</pre>
</li>
</ul>
<a name="updateLastUsed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateLastUsed</h4>
<pre>public&nbsp;void&nbsp;updateLastUsed()</pre>
</li>
</ul>
<a name="getMonitorString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMonitorString</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getMonitorString()</pre>
</li>
</ul>
<a name="getStatusString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStatusString</h4>
<pre>public&nbsp;java.lang.String&nbsp;getStatusString()</pre>
</li>
</ul>
<a name="getMaxIndex()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxIndex</h4>
<pre>public&nbsp;int&nbsp;getMaxIndex()</pre>
</li>
</ul>
<a name="getLastUsed()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastUsed</h4>
<pre>public&nbsp;long&nbsp;getLastUsed()</pre>
<div class="block">return time this file was last used to read or write anything</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The System.currentTimeMillis() of the last IO</dd></dl>
</li>
</ul>
<a name="setDebug(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDebug</h4>
<pre>public static&nbsp;void&nbsp;setDebug(boolean&nbsp;t)</pre>
<div class="block">set debug level</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>t</code> - The new debut state</dd></dl>
</li>
</ul>
<a name="setFL(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFL</h4>
<pre>public static&nbsp;void&nbsp;setFL(java.lang.String&nbsp;s)</pre>
<div class="block">set who has the file list mutex</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>s</code> - a string identifying the holder of the mutex</dd></dl>
</li>
</ul>
<a name="getInstance()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre>public final&nbsp;java.lang.String&nbsp;getInstance()</pre>
</li>
</ul>
<a name="getRawDisk()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRawDisk</h4>
<pre>public&nbsp;<a href="../../../../gov/usgs/anss/edge/RawDisk.html" title="class in gov.usgs.anss.edge">RawDisk</a>&nbsp;getRawDisk()</pre>
<div class="block">get the rawdisk variable for using the index file</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A RawDisk object for I/O to this index file</dd></dl>
</li>
</ul>
<a name="getDataRawDisk()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataRawDisk</h4>
<pre>public&nbsp;<a href="../../../../gov/usgs/anss/edge/RawDisk.html" title="class in gov.usgs.anss.edge">RawDisk</a>&nbsp;getDataRawDisk()</pre>
<div class="block">get raw disk object for data file</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A RawDisk object for I/O to the data file associated with this index file</dd></dl>
</li>
</ul>
<a name="getCheckRawDisk()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckRawDisk</h4>
<pre>public&nbsp;<a href="../../../../gov/usgs/anss/edge/RawDisk.html" title="class in gov.usgs.anss.edge">RawDisk</a>&nbsp;getCheckRawDisk()</pre>
<div class="block">get raw disk object for index check file</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A RawDisk object for I/O to the data file associated with this index file</dd></dl>
</li>
</ul>
<a name="isReadOnly()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isReadOnly</h4>
<pre>public&nbsp;boolean&nbsp;isReadOnly()</pre>
<div class="block">is this file readonly</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>true if read only</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public final&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">a string representing this index file</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the filename/julian and ro=True/False</dd></dl>
</li>
</ul>
<a name="toStringBuilder(java.lang.StringBuilder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStringBuilder</h4>
<pre>public final&nbsp;java.lang.StringBuilder&nbsp;toStringBuilder(java.lang.StringBuilder&nbsp;tmp)</pre>
</li>
</ul>
<a name="toStringFull()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStringFull</h4>
<pre>public&nbsp;java.lang.String&nbsp;toStringFull()</pre>
<div class="block">a string representing this index file</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the filename/julian and ro=True/False</dd></dl>
</li>
</ul>
<a name="toStringBuilderFull(java.lang.StringBuilder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStringBuilderFull</h4>
<pre>public&nbsp;java.lang.StringBuilder&nbsp;toStringBuilderFull(java.lang.StringBuilder&nbsp;tmp)</pre>
</li>
</ul>
<a name="getTick()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTick</h4>
<pre>public&nbsp;long&nbsp;getTick()</pre>
<div class="block">return the ticks counter in the zeroer.  This was used in unit test to slow
down the main, but may not have another use.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the number of ticks counted by the zeroer (50 milli each).</dd></dl>
</li>
</ul>
<a name="getJulian()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJulian</h4>
<pre>public&nbsp;int&nbsp;getJulian()</pre>
<div class="block">return the full julian day for this file</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the julian day since long ago</dd></dl>
</li>
</ul>
<a name="getNode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNode</h4>
<pre>public&nbsp;java.lang.String&nbsp;getNode()</pre>
<div class="block">return the edge node string for this file</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The edge node for this file</dd></dl>
</li>
</ul>
<a name="getIndexBlockCheck(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexBlockCheck</h4>
<pre>public&nbsp;<a href="../../../../gov/usgs/anss/edge/IndexBlockCheck.html" title="class in gov.usgs.anss.edge">IndexBlockCheck</a>&nbsp;getIndexBlockCheck(int&nbsp;blk)</pre>
<div class="block">return a check block if there is one for the given block</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blk</code> - The block number of the desired check block</dd>
<dt><span class="strong">Returns:</span></dt><dd>a null if the check block is not in the active list</dd></dl>
</li>
</ul>
<a name="fileExists(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileExists</h4>
<pre>public static&nbsp;java.lang.String&nbsp;fileExists(java.lang.String&nbsp;name)</pre>
<div class="block">check to see if a file exists on the paths for data.  If so get its full path name</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>name</code> - The filename portion like 2008_047_7.ms</dd>
<dt><span class="strong">Returns:</span></dt><dd>null if it does not exist, else the filename string for the whole path is returned</dd></dl>
</li>
</ul>
<a name="deleteJulianLimit(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteJulianLimit</h4>
<pre>public static&nbsp;long&nbsp;deleteJulianLimit(int&nbsp;limit)</pre>
<div class="block">check to see if a file exists on the paths for data.  If so get its full path name</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>limit</code> - The number of days back to purge to</dd>
<dt><span class="strong">Returns:</span></dt><dd>number of bytes freed by this delete.</dd></dl>
</li>
</ul>
<a name="trimFileSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trimFileSize</h4>
<pre>public&nbsp;boolean&nbsp;trimFileSize()</pre>
</li>
</ul>
<a name="writeIndexBlock(byte[], int, int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeIndexBlock</h4>
<pre>public&nbsp;void&nbsp;writeIndexBlock(byte[]&nbsp;buf,
                   int&nbsp;indexBlock,
                   int&nbsp;extentIndex,
                   java.lang.String&nbsp;seedname)
                     throws java.io.IOException,
                            <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></pre>
<div class="block">write index block, if this index is the ctl block, the next_extent is checked to
 insure out version is just as high and that the zero is past it and the ctl block is 
 updated.  If this is a master block, then it is updated in the chk file.  It will wait for the
 zeroer to get past the new highwater.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buf</code> - The 512 bytes of index block to write</dd><dd><code>indexBlock</code> - The block number in the index file</dd><dd><code>extentIndex</code> - The extentIndex within this index block (-1 if its a MasterBlock)</dd><dd><code>seedname</code> - The 12 character seedname (to allow checking for illegal updates)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If one occurs on the physical I/O.</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - if the index block contains an illegal seedname</dd></dl>
</li>
</ul>
<a name="writeIndexBlock(byte[], int, int, java.lang.StringBuilder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeIndexBlock</h4>
<pre>public&nbsp;void&nbsp;writeIndexBlock(byte[]&nbsp;buf,
                   int&nbsp;indexBlock,
                   int&nbsp;extentIndex,
                   java.lang.StringBuilder&nbsp;seedname)
                     throws java.io.IOException,
                            <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></pre>
<div class="block">write index block, if this index is the ctl block, the next_extent is checked to
 insure out version is just as high and that the zero is past it and the ctl block is 
 updated.  If this is a master block, then it is updated in the chk file.  It will wait for the
 zeroer to get past the new highwater.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buf</code> - The 512 bytes of index block to write</dd><dd><code>indexBlock</code> - The block number in the index file</dd><dd><code>extentIndex</code> - The extentIndex within this index block (-1 if its a MasterBlock)</dd><dd><code>seedname</code> - The 12 character seedname (to allow checking for illegal updates)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If one occurs on the physical I/O.</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - if the index block contains an illegal seedname</dd></dl>
</li>
</ul>
<a name="writeDataBlock(java.lang.String, byte[], int, int, int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeDataBlock</h4>
<pre>public&nbsp;boolean&nbsp;writeDataBlock(java.lang.String&nbsp;seedname,
                     byte[]&nbsp;buf,
                     int&nbsp;iblk,
                     int&nbsp;indexBlock,
                     int&nbsp;index,
                     boolean&nbsp;continuation)
                       throws java.io.IOException,
                              <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></pre>
<div class="block">write out a new data block, if this is new highwater in the file, it sets it so
 and makes sure the zeroer has zeroed past this block before it is written.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>seedname</code> - The seedname for this data block (or continuation block) for check</dd><dd><code>buf</code> - The 512 bytes of data to write</dd><dd><code>iblk</code> - The block number to put it in</dd><dd><code>indexBlock</code> - The index block in which this data block reflected</dd><dd><code>index</code> - The extent index in the index block where this data block is reflected.</dd><dd><code>continuation</code> - If true, this is not a header block, but the continuation of a bigger MS block</dd>
<dt><span class="strong">Returns:</span></dt><dd>true, if the blocks is a remark of a recevied block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If one occurs during the physical I/O.</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - if the data block contains an illegal seedname</dd></dl>
</li>
</ul>
<a name="writeDataBlock(java.lang.StringBuilder, byte[], int, int, int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeDataBlock</h4>
<pre>public&nbsp;boolean&nbsp;writeDataBlock(java.lang.StringBuilder&nbsp;seedname,
                     byte[]&nbsp;buf,
                     int&nbsp;iblk,
                     int&nbsp;indexBlock,
                     int&nbsp;index,
                     boolean&nbsp;continuation)
                       throws java.io.IOException,
                              <a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></pre>
<div class="block">write out a new data block, if this is new highwater in the file, it sets it so
 and makes sure the zeroer has zeroed past this block before it is written.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>seedname</code> - The seedname for this data block (or continuation block) for check</dd><dd><code>buf</code> - The 512 bytes of data to write</dd><dd><code>iblk</code> - The block number to put it in</dd><dd><code>indexBlock</code> - The index block in which this data block reflected</dd><dd><code>index</code> - The extent index in the index block where this data block is reflected.</dd><dd><code>continuation</code> - If true, this is not a header block, but the continuation of a bigger MS block</dd>
<dt><span class="strong">Returns:</span></dt><dd>true, if the blocks is a remark of a recevied block</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If one occurs during the physical I/O.</dd>
<dd><code><a href="../../../../gov/usgs/anss/edge/IllegalSeednameException.html" title="class in gov.usgs.anss.edge">IllegalSeednameException</a></code> - if the data block contains an illegal seedname</dd></dl>
</li>
</ul>
<a name="isShuttingDown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isShuttingDown</h4>
<pre>public static&nbsp;boolean&nbsp;isShuttingDown()</pre>
<div class="block">return state of shutting down variable</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>True if in a shutting down state</dd></dl>
</li>
</ul>
<a name="getIndexFileReplicator(int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexFileReplicator</h4>
<pre>public static&nbsp;<a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html" title="class in gov.usgs.anss.edge">IndexFileReplicator</a>&nbsp;getIndexFileReplicator(int&nbsp;julian,
                                         java.lang.String&nbsp;node)</pre>
<div class="block">get IndexFile associated with a given day, This routine enforces the 
 open days rules and returns a pointer to "future.idx" or "past.idx" if the
 day is out of range</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>julian</code> - The julian date of the file desired.</dd><dd><code>node</code> - The string edge node of the desired file</dd>
<dt><span class="strong">Returns:</span></dt><dd>The index file or null if none found</dd></dl>
</li>
</ul>
<a name="getIndexFileReplicator(int, java.lang.StringBuilder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexFileReplicator</h4>
<pre>public static&nbsp;<a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.html" title="class in gov.usgs.anss.edge">IndexFileReplicator</a>&nbsp;getIndexFileReplicator(int&nbsp;julian,
                                         java.lang.StringBuilder&nbsp;node)</pre>
<div class="block">get IndexFile associated with a given day, This routine enforces the 
 open days rules and returns a pointer to "future.idx" or "past.idx" if the
 day is out of range</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>julian</code> - The julian date of the file desired.</dd><dd><code>node</code> - The string edge node of the desired file</dd>
<dt><span class="strong">Returns:</span></dt><dd>The index file or null if none found</dd></dl>
</li>
</ul>
<a name="getNOpenFiles()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNOpenFiles</h4>
<pre>public static&nbsp;int&nbsp;getNOpenFiles()</pre>
<div class="block">get number of open files</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The number of open files</dd></dl>
</li>
</ul>
<a name="getFilename()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilename</h4>
<pre>public&nbsp;java.lang.String&nbsp;getFilename()</pre>
<div class="block">return the filename associated with this IndexFile</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The filename string</dd></dl>
</li>
</ul>
<a name="getPath(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPath</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getPath(int&nbsp;i)</pre>
<div class="block">return the requested path</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>i</code> - The index number of the path</dd>
<dt><span class="strong">Returns:</span></dt><dd>String with path name</dd></dl>
</li>
</ul>
<a name="getNPaths()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNPaths</h4>
<pre>public static&nbsp;int&nbsp;getNPaths()</pre>
<div class="block">return number of paths</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the number of paths</dd></dl>
</li>
</ul>
<a name="getPathString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPathString</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getPathString()</pre>
</li>
</ul>
<a name="forceinit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceinit</h4>
<pre>public static&nbsp;void&nbsp;forceinit()</pre>
</li>
</ul>
<a name="init()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public static&nbsp;void&nbsp;init()</pre>
<div class="block">This does all of the one-time static set up, create tree, read properties.</div>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws java.io.IOException</pre>
<div class="block">close this index file and clean up other resources.  Synchronized so only one close thread can be created</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If IOException while trying to close the file</dd></dl>
</li>
</ul>
<a name="setDefaultLength(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDefaultLength</h4>
<pre>public static&nbsp;void&nbsp;setDefaultLength(int&nbsp;l)</pre>
<div class="block">set the default length of the da ta files in blocks</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>l</code> - The length in blocks of the data files by default</dd></dl>
</li>
</ul>
<a name="closeAll()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeAll</h4>
<pre>public static&nbsp;void&nbsp;closeAll()</pre>
<div class="block">close open for write file using the list of open files</div>
</li>
</ul>
<a name="getFullStatusSB()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFullStatusSB</h4>
<pre>public static&nbsp;java.lang.StringBuilder&nbsp;getFullStatusSB()</pre>
<div class="block">dump out info on all known open files</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String with one file per line and its status</dd></dl>
</li>
</ul>
<a name="getFullStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFullStatus</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getFullStatus()</pre>
</li>
</ul>
<a name="trimFiles(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>trimFiles</h4>
<pre>public static&nbsp;void&nbsp;trimFiles(int&nbsp;target)</pre>
<div class="block">close any files until less that the target number of files are opened.  The
 files are closed based on the the longest times since they were last used.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>target</code> - The number of files that are allowed to be left open</dd></dl>
</li>
</ul>
<a name="closeStale(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeStale</h4>
<pre>public static&nbsp;void&nbsp;closeStale(int&nbsp;ms)</pre>
<div class="block">close any files which have not been used for the given number of millis</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ms</code> - The number of millis that need to have expired without usage to cause close</dd></dl>
</li>
</ul>
<a name="closeJulianLimit(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeJulianLimit</h4>
<pre>public static&nbsp;int&nbsp;closeJulianLimit(int&nbsp;limit,
                   int&nbsp;msused)</pre>
<div class="block">close any files which are not within the limit number of days and not used in some amount of time</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>limit</code> - The limit of the number of days that can be open</dd><dd><code>msused</code> - The number of milliseconds that must have passed since the file was last used</dd>
<dt><span class="strong">Returns:</span></dt><dd>The number of files closed by this call</dd></dl>
</li>
</ul>
<a name="writeStale()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeStale</h4>
<pre>public static&nbsp;void&nbsp;writeStale()</pre>
<div class="block">For every open IndexFileReplicator, process up any stale or completed blocks!</div>
</li>
</ul>
<a name="getStatusAll()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStatusAll</h4>
<pre>public static&nbsp;java.lang.StringBuilder&nbsp;getStatusAll()</pre>
<div class="block">For every open IndexFileReplicator, process up any stale or completed blocks!</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the status of all of the IndexFileReplicators on the files list</dd></dl>
</li>
</ul>
<a name="getMasterBlocks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMasterBlocks</h4>
<pre>public&nbsp;<a href="../../../../gov/usgs/anss/edge/MasterBlock.html" title="class in gov.usgs.anss.edge">MasterBlock</a>[]&nbsp;getMasterBlocks()
                              throws java.io.IOException</pre>
<div class="block">Cause the master blocks to be re-read.  Should only be done on readonly files.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the array of Master blocks</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If one is generated by the reads of the master blocks.</dd></dl>
</li>
</ul>
<a name="compareTo(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compareTo</h4>
<pre>public&nbsp;int&nbsp;compareTo(java.lang.Object&nbsp;other)</pre>
<div class="block">compares two file types orders them by julian day.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>compareTo</code>&nbsp;in interface&nbsp;<code>java.lang.Comparable</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>other</code> - The IndexFile to compare against</dd>
<dt><span class="strong">Returns:</span></dt><dd>-1 if this < other, 0 if equal, 1 if this is greater than</dd></dl>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IndexFileReplicator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/usgs/anss/edge/IndexFile.CloseThread.html" title="class in gov.usgs.anss.edge"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../gov/usgs/anss/edge/IndexFileReplicator.CloseThread.html" title="class in gov.usgs.anss.edge"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/usgs/anss/edge/IndexFileReplicator.html" target="_top">Frames</a></li>
<li><a href="IndexFileReplicator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
