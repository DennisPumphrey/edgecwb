<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Wed Jul 15 14:50:09 MDT 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>OORChan</title>
<meta name="date" content="2015-07-15">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="OORChan";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OORChan.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/usgs/anss/edge/MiniSeedOutputHandler.html" title="interface in gov.usgs.anss.edge"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../gov/usgs/anss/edge/OORChan.OORChanServer.html" title="class in gov.usgs.anss.edge"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/usgs/anss/edge/OORChan.html" target="_top">Frames</a></li>
<li><a href="OORChan.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">gov.usgs.anss.edge</div>
<h2 title="Class OORChan" class="title">Class OORChan</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>gov.usgs.anss.edge.OORChan</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">OORChan</span>
extends java.lang.Object</pre>
<div class="block">This class attempts to deal with the out-of-order data from sources like CD1.?.
 There is an "nextExpect" packet.  The rules are :

1) If the submitted is next, send it immediately.  Check spans to see if one of them is next,
2)  If the submitted is two minutes newer than nextExpected, it is the new nextExpected
   (that is leap forward if something comes in that is 2 minutes newer)
3) If neither, try to add this packet to any existing spans (on beginning or end)
4) If no spans are right for addition, create a new span with this packet.

The "process()" method is used to clean up spans that are old.  Basically it:
1)  Tries pair wise to find spans that should be combined (i.e. they have grown to each other)
2)  It looks to see if the span has not been added to in UPDATE_TIMEOUT ms, if so, it is
    sent out (basically if something is not being added to, a timeout to force it out)
3)  If the span is still growing but has reach NSAMP_FORCEOUT samples in length, force it
    out.  This insures long spans which might grow for a long time are periodically forced
    through so the storage burden here is manageable.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.OORChanServer.html" title="class in gov.usgs.anss.edge">OORChan.OORChanServer</a></strong></code>
<div class="block">OORChanServer.java - This server looks for a telnet type connection,accepts a message of 
the form yyyy,doy,node\n and forms up a FORCELOADIT! block for the EdgeBlockQueue.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#OORChan(java.lang.StringBuilder,%20gov.usgs.anss.edgethread.EdgeThread)">OORChan</a></strong>(java.lang.StringBuilder&nbsp;name,
       <a href="../../../../gov/usgs/anss/edgethread/EdgeThread.html" title="class in gov.usgs.anss.edgethread">EdgeThread</a>&nbsp;par)</code>
<div class="block">Creates a new instance of OORChan</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#addBuffer(int[],%20java.lang.StringBuilder,%20int,%20int,%20int,%20int,%20int,%20double,%20int,%20int,%20int,%20int)">addBuffer</a></strong>(int[]&nbsp;ts,
         java.lang.StringBuilder&nbsp;seedname,
         int&nbsp;nsamp,
         int&nbsp;year,
         int&nbsp;doy,
         int&nbsp;sec,
         int&nbsp;micros,
         double&nbsp;rt,
         int&nbsp;activity,
         int&nbsp;IOClock,
         int&nbsp;quality,
         int&nbsp;timingQuality)</code>
<div class="block">Attempt to add some data to this channel.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#addBuffer(int[],%20java.lang.StringBuilder,%20int,%20int,%20int,%20int,%20int,%20double,%20int,%20int,%20int,%20int,%20boolean)">addBuffer</a></strong>(int[]&nbsp;ts,
         java.lang.StringBuilder&nbsp;seedname,
         int&nbsp;nsamp,
         int&nbsp;year,
         int&nbsp;doy,
         int&nbsp;sec,
         int&nbsp;micros,
         double&nbsp;rt,
         int&nbsp;activity,
         int&nbsp;IOClock,
         int&nbsp;quality,
         int&nbsp;timingQuality,
         boolean&nbsp;hydra)</code>
<div class="block">Attempt to add some data to this channel.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#forceOut()">forceOut</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#getNSpans()">getNSpans</a></strong>()</code>
<div class="block">return number of spans held in the OORChan</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#process()">process</a></strong>()</code>
<div class="block">this is called periodically to purge out any unupdated or sufficiently long spans.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#setDebug(boolean)">setDebug</a></strong>(boolean&nbsp;b)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#setDebug(java.lang.String,%20boolean)">setDebug</a></strong>(java.lang.String&nbsp;seed,
        boolean&nbsp;b)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#toString()">toString</a></strong>()</code>
<div class="block">convert a string representing this object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.StringBuilder</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#toStringBufDetail()">toStringBufDetail</a></strong>()</code>
<div class="block">convert a string representing this object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.StringBuilder</code></td>
<td class="colLast"><code><strong><a href="../../../../gov/usgs/anss/edge/OORChan.html#toStringBuilder(java.lang.StringBuilder)">toStringBuilder</a></strong>(java.lang.StringBuilder&nbsp;tmp)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="OORChan(java.lang.StringBuilder, gov.usgs.anss.edgethread.EdgeThread)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>OORChan</h4>
<pre>public&nbsp;OORChan(java.lang.StringBuilder&nbsp;name,
       <a href="../../../../gov/usgs/anss/edgethread/EdgeThread.html" title="class in gov.usgs.anss.edgethread">EdgeThread</a>&nbsp;par)</pre>
<div class="block">Creates a new instance of OORChan</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>name</code> - a 12 character seedname</dd><dd><code>par</code> - The parent to use for logging</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setDebug(java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDebug</h4>
<pre>public static&nbsp;void&nbsp;setDebug(java.lang.String&nbsp;seed,
            boolean&nbsp;b)</pre>
</li>
</ul>
<a name="setDebug(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDebug</h4>
<pre>public&nbsp;void&nbsp;setDebug(boolean&nbsp;b)</pre>
</li>
</ul>
<a name="getNSpans()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNSpans</h4>
<pre>public&nbsp;int&nbsp;getNSpans()</pre>
<div class="block">return number of spans held in the OORChan</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The number of spans being held by the OORChan</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">convert a string representing this object.  It consists of name, rate, start time, # spans
 and a list of the spans and their ranges, #samp</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>s</dd></dl>
</li>
</ul>
<a name="toStringBuilder(java.lang.StringBuilder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStringBuilder</h4>
<pre>public&nbsp;java.lang.StringBuilder&nbsp;toStringBuilder(java.lang.StringBuilder&nbsp;tmp)</pre>
</li>
</ul>
<a name="toStringBufDetail()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toStringBufDetail</h4>
<pre>public&nbsp;java.lang.StringBuilder&nbsp;toStringBufDetail()</pre>
<div class="block">convert a string representing this object.  It consists of name, rate, start time, # spans
 and a list of the spans and thier ranges, #samps</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The buffer detail string</dd></dl>
</li>
</ul>
<a name="addBuffer(int[], java.lang.StringBuilder, int, int, int, int, int, double, int, int, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addBuffer</h4>
<pre>public&nbsp;void&nbsp;addBuffer(int[]&nbsp;ts,
             java.lang.StringBuilder&nbsp;seedname,
             int&nbsp;nsamp,
             int&nbsp;year,
             int&nbsp;doy,
             int&nbsp;sec,
             int&nbsp;micros,
             double&nbsp;rt,
             int&nbsp;activity,
             int&nbsp;IOClock,
             int&nbsp;quality,
             int&nbsp;timingQuality)</pre>
<div class="block">Attempt to add some data to this channel.  It will either be sent, or added to a
 span.  Hydra is assumed true.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ts</code> - Array of ints with time series</dd><dd><code>seedname</code> - A seedname of the channel</dd><dd><code>nsamp</code> - Number of samples in x</dd><dd><code>year</code> - The year of the 1st sample</dd><dd><code>doy</code> - The day-of-year of first sample</dd><dd><code>sec</code> - Seconds since midnight of the first sample</dd><dd><code>micros</code> - Microseconds (fraction of a second) to add to seconds for first sample</dd><dd><code>rt</code> - Digitizing rate in Hz.</dd><dd><code>activity</code> - The activity flags per SEED volume (ch 8 pg 93)</dd><dd><code>IOClock</code> - The I/O and clock flags per SEED volume</dd><dd><code>quality</code> - The clock quality as defined in SEED volume</dd><dd><code>timingQuality</code> - The timeing quality as defined in SEED volume</dd></dl>
</li>
</ul>
<a name="addBuffer(int[], java.lang.StringBuilder, int, int, int, int, int, double, int, int, int, int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addBuffer</h4>
<pre>public&nbsp;void&nbsp;addBuffer(int[]&nbsp;ts,
             java.lang.StringBuilder&nbsp;seedname,
             int&nbsp;nsamp,
             int&nbsp;year,
             int&nbsp;doy,
             int&nbsp;sec,
             int&nbsp;micros,
             double&nbsp;rt,
             int&nbsp;activity,
             int&nbsp;IOClock,
             int&nbsp;quality,
             int&nbsp;timingQuality,
             boolean&nbsp;hydra)</pre>
<div class="block">Attempt to add some data to this channel.  It will either be sent, or added to a
 span.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ts</code> - Array of ints with time series</dd><dd><code>seedname</code> - A seedname of the channel</dd><dd><code>nsamp</code> - Number of samples in x</dd><dd><code>year</code> - The year of the 1st sample</dd><dd><code>doy</code> - The day-of-year of first sample</dd><dd><code>sec</code> - Seconds since midnight of the first sample</dd><dd><code>micros</code> - Microseconds (fraction of a second) to add to seconds for first sample</dd><dd><code>rt</code> - Digitizing rate in Hz.</dd><dd><code>activity</code> - The activity flags per SEED volume (ch 8 pg 93)</dd><dd><code>IOClock</code> - The I/O and clock flags per SEED volume</dd><dd><code>quality</code> - The clock quality as defined in SEED volume</dd><dd><code>timingQuality</code> - The timing quality as defined in SEED volume</dd><dd><code>hydra</code> - If true, send block to hydra</dd></dl>
</li>
</ul>
<a name="process()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>process</h4>
<pre>public&nbsp;void&nbsp;process()</pre>
<div class="block">this is called periodically to purge out any unupdated or sufficiently long spans.
1) sees if any are now on the current span, 2) see if any have timed out (UPDATE_TIMEOUT)
 , 3) see if any have nsamps above the NSAMP_FORCE limit</div>
</li>
</ul>
<a name="forceOut()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>forceOut</h4>
<pre>public&nbsp;void&nbsp;forceOut()</pre>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/OORChan.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../gov/usgs/anss/edge/MiniSeedOutputHandler.html" title="interface in gov.usgs.anss.edge"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../gov/usgs/anss/edge/OORChan.OORChanServer.html" title="class in gov.usgs.anss.edge"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?gov/usgs/anss/edge/OORChan.html" target="_top">Frames</a></li>
<li><a href="OORChan.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
